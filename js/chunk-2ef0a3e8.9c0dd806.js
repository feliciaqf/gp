(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2ef0a3e8"],{"0f71":function(t,e,s){},"7c64":function(t,e,s){"use strict";s.r(e),s("8e6e"),s("456d"),s("ac6a");var a=s("ade3"),i=s("2b0e"),n=s("1c03"),c=s("40ef"),o=s("5d59"),r=(s("bd8a"),s("c428")),l=(s("2f3b"),s("d399")),d=(s("d1c2"),s("2f62"));function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}i.a.use(l.a);var v={name:"index",data:function(){return{title:this.$t("消息"),active:0,siteNotice:0,userNotice:0,sitenoticeList:[],messageList:[],finished:!1,page:1,loading:!0,mfinished:!1,mpage:1,mloading:!0,messageType:{}}},created:function(){},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach((function(e){Object(a.a)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},Object(d.d)("users",["userInfo"])),methods:{readInfo:function(t,e){this.$router.push({name:"newsDetail",query:{id:t.id,type:e,title:t.title,content:t.content,created_at:t.created_at,updated_at:t.updated_at,is_read:t.is_read}})},getSitenoticelist:function(){var t=this;Object(o.f)({uid:this.userInfo.id,page:this.page,is_pic:0}).then((function(e){0===e.data.code?(t.loading=!1,t.sitenoticeList=t.sitenoticeList.concat(e.data.data.data),t.page===e.data.data.last_page&&(t.finished=!0)):Object(l.a)(e.data.msg)}))},messagetypelist:function(){var t=this;this.$loading(),Object(o.c)("10031",window.localStorage.token).then((function(e){0==e.data.code&&(t.messageType=e.data.data,t.getMessageList())}))},getMessageList:function(t){var e=this;this.userNotice=0,Object(o.b)({page:this.mpage,uid:this.userInfo.id}).then((function(s){if(0===s.data.code){e.$toast.clear(),e.mloading=!1;var a=function(t){s.data.data.data.forEach((function(s){s.type==t&&(s.title=e.messageType[t])}))};for(var i in e.messageType)a(i);e.messageList=t?s.data.data.data:e.messageList.concat(s.data.data.data),e.mpage===s.data.data.last_page&&(e.mfinished=!0)}}))},onMLoad:function(){this.mpage++,this.getMessageList()},onSLoad:function(){this.page++,this.getSitenoticelist()}},mounted:function(){this.active=this.$route.query.active||0,this.getSitenoticelist(),this.messagetypelist()},components:{Vtabbar:n.a,Lheader:c.a,Loading:r.a}},g=(s("9497"),s("0c7c")),f=Object(g.a)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"message-title"},[s("van-icon",{attrs:{name:"arrow-left"},on:{click:function(e){return t.$router.push({name:"memberCenter"})}}}),s("span",[t._v(t._s(t.$t("消息中心")))])],1),s("div",{staticClass:"e-main"},[s("van-tabs",{attrs:{"line-width":".64rem","line-height":".08rem",color:"none","title-active-color":"white"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[s("van-tab",[s("div",{staticClass:"tabsTitle",attrs:{slot:"title"},slot:"title"},[t._v("\n"+t._s(t.$t("站内信"))+"\n            "),0!==t.userInfo.user_notice_unread_counts?s("i",[t._v(t._s(t.userInfo.user_notice_unread_counts))]):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.messageList.length>0,expression:"messageList.length > 0"}],staticClass:"main"},[s("ul",[s("van-list",{attrs:{finished:t.mfinished},on:{load:t.onMLoad},model:{value:t.mloading,callback:function(e){t.mloading=e},expression:"mloading"}},t._l(t.messageList,(function(e,a){return s("li",{key:a,staticClass:"clearfix",class:{is_read:2===e.is_read},on:{click:function(s){return t.readInfo(e,2)}}},[s("i"),s("div",{staticClass:"list"},[s("div",{staticClass:"item-header"},[s("span",{staticClass:"title"},[t._v(t._s(t.$t(e.title)))]),s("span",{staticClass:"time"},[t._v(t._s(e.created_at))])]),s("div",{staticClass:"content"},[t._v(t._s(e.content))])])])})),0)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.messageList.length&&!t.mloading,expression:"messageList.length == 0 && !mloading"}],staticClass:"empty"},[s("div",{staticClass:"emptyDiv"},[s("div",{staticClass:"errorEmail"}),s("div",{staticClass:"text"},[s("div",{staticClass:"chinese"},[t._v(t._s(t.$t("您还没有收到任何站内信")))])])])])]),s("van-tab",[s("div",{staticClass:"tabsTitle",attrs:{slot:"title"},slot:"title"},[t._v("\n"+t._s(t.$t("公告"))+"\n            "),0!==t.userInfo.site_notice_unread_counts?s("i",[t._v(t._s(t.userInfo.site_notice_unread_counts))]):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.sitenoticeList.length>0,expression:"sitenoticeList.length > 0"}],staticClass:"main"},[s("ul",[s("van-list",{attrs:{finished:t.finished},on:{load:t.onSLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.sitenoticeList,(function(e,a){return s("li",{key:a,staticClass:"clearfix",class:{is_read:1==e.is_read},on:{click:function(s){return t.readInfo(e,1)}}},[s("div",{staticClass:"list"},[s("div",{staticClass:"item-header"},[s("span",{staticClass:"title"},[1==e.is_important?s("van-tag",{staticClass:"item-tag",attrs:{type:"warning"}},[t._v(t._s(t.$t("重要")))]):t._e(),t._v("\n                        "+t._s(t.$t(e.title))+"\n                      ")],1),s("span",{staticClass:"time"},[t._v(t._s(e.created_at))])]),s("div",{staticClass:"content"},[t._v(t._s(e.content))])])])})),0)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.sitenoticeList.length&&!t.loading,expression:"sitenoticeList.length == 0 && !loading"}],staticClass:"empty"},[s("div",{staticClass:"emptyDiv"},[s("div",{staticClass:"errorImg"}),s("div",{staticClass:"text"},[s("div",{staticClass:"chinese"},[t._v(t._s(t.$t("您还没有收到任何公告")))])])])])])],1)],1)])}),[],!1,null,"2fc90ebe",null);e.default=f.exports},9497:function(t,e,s){"use strict";s("0f71")}}]);