(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-442613c0"],{"8c96":function(e,t,a){},a3cf:function(e,t,a){"use strict";a.r(t),a("8e6e"),a("ac6a"),a("456d"),a("386d"),a("28a5"),a("96cf");var n=a("1da1"),r=a("ade3"),o=a("af0a"),c=a("2f62"),i=a("53ca");function s(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest?new XMLHttpRequest:void 0}function u(e){if("object"===Object(i.a)(e)){var t="";for(var a in e)t+=a+"="+e[a]+"&";return t.substring(0,t.length-1)}return e}var d=function(){var e={type:(arguments[0].type||"GET").toUpperCase(),url:arguments[0].url||"",async:arguments[0].async||"true",data:arguments[0].data||null,dataType:arguments[0].dataType||"json",contentType:arguments[0].contentType||"application/x-www-form-urlencoded charset=utf-8",beforeSend:arguments[0].beforeSend||function(){},success:arguments[0].success||function(){},error:arguments[0].error||function(){}};e.beforeSend();var t=s();t.responseType=e.dataType,t.open(e.type,e.url,e.async),t.setRequestHeader("Content-Type",e.contentType),t.send(u(e.data)),t.onreadystatechange=function(){4==t.readyState&&(200==t.status?e.success(t.response):e.error())}},m=a("29b2");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var l,p={name:"game",data:function(){return{bdUrl:"",initTime:0,allPlatforms:""}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(c.c)("user",["token"])),created:(l=Object(n.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("games/getAllPlatforms");case 2:this.allPlatforms=e.sent,this.$nextTick((function(){t.openGame()}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)}),mounted:function(){function e(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}if(e(),window.addEventListener("resize",e),this.$once("destroy",(function(){window.removeEventListener("resize",e)})),-1!==[121].indexOf(1*this.$route.query.platform_id)||-1!=[2].indexOf(1*this.$route.query.cate_id)&&-1!=[3].indexOf(1*this.$route.query.platform_id))return!1;this.$notify({message:this.$t("请开启自动旋转屏幕能够横屏玩游戏"),duration:5e3}),window!=top&&(top.location.href=location.href);var t=this;window.onbeforeunload=function(e){if("http"==t.bdUrl.split(":")[0]&&"m.aagames.me"!==document.domain||"https"==t.bdUrl.split(":")[0]&&"m.aagames.me"!=document.domain||"m.aagames.me"==document.domain&&"PT"==t.allPlatforms[t.$route.query.platform_id])if(navigator.sendBeacon){var a={game_id:t.$route.query.game_id,access_token:t.token,merchant_no:"10039"};t.result=navigator.sendBeacon("https://userapi.h22api.com/backtrans",a),window.localStorage.setItem("backtrans-result",t.result)}else d({type:"POST",url:"https://userapi.h22api.com/backtrans",data:{game_id:t.$route.query.game_id,access_token:t.token,merchant_no:"10039"},async:!1,success:function(e){Object(m.b)()}})}},methods:{setIframe:function(){var e=document.createElement("iframe"),t=document.getElementsByClassName("game")[0];e.src=this.bdUrl,e.attachEvent?e.attachEvent("onload",(function(){})):e.onload=function(){},t.appendChild(e)},openGame:function(){var e=this;this.$loading({mask:!1}),Object(o.b)({game_id:this.$route.query.game_id}).then((function(t){var a=e;if(0===t.data.code){if(t.data.data.open_mode&&2===t.data.data.open_mode)return window.location.href=t.data.data.url,!1;"http"==t.data.data.url.split(":")[0]&&"m.aagames.me"!==window.location.host||"PT"==a.allPlatforms[a.$route.query.platform_id]&&"m.aagames.me"!=window.location.host?window.location.href="http://".concat("m.aagames.me","/game").concat(window.location.search):-1!=[121].indexOf(1*a.$route.query.platform_id)||-1!==[2].indexOf(1*a.$route.query.cate_id)&&-1!==[3].indexOf(1*a.$route.query.platform_id)||"PT"==a.allPlatforms[a.$route.query.platform_id]?(window.location.href=t.data.data.url,a.gameCheck()):(a.bdUrl=t.data.data.url,a.gameCheck())}else a.$toast({message:t.data.msg,onClose:function(){a.$router.push({path:"home"})}})}))},gameCheck:function(){var e=this.token||this.$route.query.at;Object(m.a)("".concat("wss://ws.wq-test.com","/connect?token=").concat(e,"&ctype=user"))}},destroyed:function(){Object(m.b)()}},h=(a("aae9"),a("0c7c")),y=Object(h.a)(p,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"game"},[t("iframe",{ref:"iframe",attrs:{src:this.bdUrl,id:"myiframe",frameborder:"0"}})])}),[],!1,null,"b68848cc",null);t.default=y.exports},aae9:function(e,t,a){"use strict";a("8c96")}}]);