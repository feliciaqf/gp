(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a9044fc2"],{"0011":function(t,e,s){},"794f":function(t,e,s){"use strict";s.r(e),s("8e6e"),s("ac6a"),s("456d"),s("28a5"),s("96cf");var i=s("1da1"),o=s("ade3"),a=s("2f62"),n=s("8975"),r=s("bd8a"),c=s("b3ad"),d=s("7752");function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function f(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(Object(s),!0).forEach((function(e){Object(o.a)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var h,m,u={name:"Withdraw",components:{BankIcon:c.a,BankcardList:d.a},data:function(){return{title:this.$t("取款"),submiting:!1,value:"1213",showKeyboard:!1,showDig:!1,bankcard:null,bindText:this.$t("请选择提现银行"),show:!1,min_money:100,ticker:0,allowSubmit:!1,form:{withdraw_money:"",user_bank_id:"",pay_password:"",protocol:"",dig_mode_type:"",currency_type:"1",address:"",user_dig_wallet_id:""},protocol:[],errText:"",password:"",accountShow:!1,showflow:!1,loading:!1,finished:!1,rechargeData:[],limitInfo:{},fees:{fee:0,admin:0,profit:0,resFee:0},showCapital:!1,time:9e5,submitInfo:!1}},watch:{"form.withdraw_money":function(t){var e=this,s=this.siteInfo.cost_manage,i=s.withdraw_fees,o=s.administrative_rate,a=s.dig_fee;"1"===this.form.currency_type&&this.judgeCostMethod()?i.some((function(s,i,o){return 1==s.withdraw_fee_type?e.fees.fee=s.withdraw_fee:2==s.withdraw_fee_type?e.fees.fee=(t*(s.withdraw_fee/100)).toFixed(2):e.fees.fee=s.withdraw_fee,t<=1*s.withdraw_fee_max})):"2"===this.form.currency_type&&this.judgeCostMethod()&&(this.fees.fee=(t*a).toFixed(2)),this.limitInfo.draw_limit_amount&&(this.fees.admin=Math.min(this.limitInfo.draw_limit_amount,t)*o),this.fees.profit=this.limitInfo.deduction_money,this.fees.resFee=Math.max(t-this.fees.fee-this.fees.admin-this.fees.profit,0),this.watchform()},"form.user_bank_id":function(){this.watchform()},"form.pay_password":function(){this.watchform()},"form.dig_mode_type":function(){this.watchform()},"form.protocol":function(){this.watchform()},"form.address":function(){this.watchform()},"form.currency_type":function(){var t=this,e=this.siteInfo.cost_manage,s=e.withdraw_fees,i=e.administrative_rate,o=e.dig_fee;"1"===this.form.currency_type&&this.judgeCostMethod()?s.some((function(e,s,i){return 1==e.withdraw_fee_type?t.fees.fee=e.withdraw_fee:2==e.withdraw_fee_type?t.fees.fee=(t.form.withdraw_money*(e.withdraw_fee/100)).toFixed(2):t.fees.fee=e.withdraw_fee,1*t.form.withdraw_money<=1*e.withdraw_fee_max})):"2"===this.form.currency_type&&this.judgeCostMethod()&&(this.fees.fee=(this.form.withdraw_money*o).toFixed(2)),this.limitInfo.draw_limit_amount&&(this.fees.admin=Math.min(this.limitInfo.draw_limit_amount,this.form.withdraw_money)*i),this.fees.profit=this.limitInfo.deduction_money,this.fees.resFee=Math.max(this.form.withdraw_money-this.fees.fee-this.fees.admin-this.fees.profit,0),this.watchform()}},computed:f(f(f({},Object(a.d)("users",["userInfo","isLogin','wallet","token"])),Object(a.d)("global",["siteInfo"])),{},{bankList:function(){return this.userInfo.user_bank},columns:function(){this.userInfo.user_bank}}),created:function(){var t=this.token,e=(this.userInfo,this.bankList);t||(this.$toast(this.$t("请先登录")),this.$router.push({name:"login"}));var s=this.$route.query.param?JSON.parse(this.$route.query.param):null;s&&(this.form.currency_type=String(s.type),this.form.address=s.address,this.form.user_dig_wallet_id=s.id,this.form.withdraw_money=s.withdraw_money||"",this.form.dig_mode_type=s.dig_mode_type||"",this.form.protocol=s.protocol||""),this.getLimitinfo(),this.bankcard=e[0],this.form.user_bank_id=this.bankcard.id},methods:{watchform:function(){"1"===this.form.currency_type?this.form.withdraw_money&&!/.*\..*/.test(this.form.withdraw_money)&&this.form.user_bank_id?this.allowSubmit=!0:this.allowSubmit=!1:this.form.withdraw_money&&!/.*\..*/.test(this.form.withdraw_money)&&this.form.dig_mode_type&&this.form.protocol&&this.form.user_dig_wallet_id&&this.form.address?this.allowSubmit=!0:this.allowSubmit=!1},getFee:function(t){var e=this.siteInfo.cost_manage,s=e.administrative_rate,i=e.dig_fee;this.fees.fee=t*i,this.limitInfo.draw_limit_amount&&(this.fees.admin=Math.min(this.limitInfo.draw_limit_amount,t)*s),this.fees.profit=this.limitInfo.deduction_money,this.fees.resFee=Math.max(t-this.fees.fee-this.fees.admin-this.fees.profit,0)},handleDig:function(){this.$router.push({name:"digAddress",query:{param:JSON.stringify(this.form)}})},onInput:function(t){this.form.pay_password=(this.form.pay_password+t).slice(0,6),6===this.form.pay_password.length&&(this.showKeyboard=!1,this.submit())},onDelete:function(){this.form.pay_password=this.form.pay_password.slice(0,this.form.pay_password.length-1)},selectBankcard:function(t){this.bankcard=t,this.show=!1},goback:function(){this.$router.push("memberCenter")},submitBefore:function(){var t=this,e=this.form,s=this.userInfo,i=this.bankcard,o=this.siteInfo;if(/.*\..*/.test(this.form.withdraw_money))return this.$toast.fail(this.$t("取款金额只能为正整数，不能带小数点")),!1;if(s&&2!==s.is_pay_password)return this.$dialog.confirm({message:this.$t("您当前未设置资金密码！"),title:this.$t("温馨提示"),confirmButtonText:this.$t("去设置")}).then((function(){t.setFundPassword()})).catch((function(){})),!1;if(!e.withdraw_money)return this.$toast.fail(this.$t("请输入取款金额")),!1;if(e.withdraw_money<1*o.cost_manage.money_range[0]||e.withdraw_money>1*o.cost_manage.money_range[1])return this.$toast.fail(this.$t("最低取款金额".concat(o.cost_manage.money_range[0],"元，最高取款金额").concat(o.cost_manage.money_range[1],"元"))),!1;if("1"===e.currency_type){if(!i||!i.id)return this.$toast.fail(this.$t("请选择取款银行卡")),!1;e.user_bank_id=i.id}else{if(!e.dig_mode_type)return this.$toast.fail(this.$t("请选择虚拟币类型")),!1;if(!e.protocol)return this.$toast.fail(this.$t("请选择协议类型")),!1;if(!e.user_dig_wallet_id)return this.$toast.fail(this.$t("请输入提币地址")),!1}this.showCapital=!0},submit:function(){var t=this;if(!this.form.pay_password)return this.$toast.fail(this.$t("请输入资金密码")),!1;this.submiting=!0;var e={};Object.assign(e,this.form),e.money=this.fees.resFee,e.administrative_charge=this.fees.admin,e.discounts=this.fees.profit,e.service_charge=this.fees.fee,Object(r.jb)(e).then((function(e){0===e.data.code?(t.$toast(t.$t("提交成功")),t.showCapital=!1,t.form.pay_password="",t.submitInfo=!0):t.$toast.fail(e.data.msg),t.submiting=!1}),(function(e){t.submiting=!1,t.showKeyboard=!1}))},showTips:function(){var t=this;this.$dialog.confirm({title:this.$t("扣款详情"),message:this.$t("手续费：取款时根据取款金额收取的手续费<br>行政费：领取红利产生未达标的流水按照比例扣除的费用<br>扣除优惠：领取红利之后未达标流水要求时申请取款需要扣除的红利金额<br>最后可取：扣除手续费、行政费和优惠之后可以取款的总金额"),cancelButtonText:this.$t("联系客服"),messageAlign:"left"}).then((function(){})).catch((function(){t.$openKefu()}))},setFundPassword:function(){this.$store.dispatch("global/setPopShow",{status:!0,passDisplay:!0})},forgetFundPassword:function(){this.$store.dispatch("global/setPopShow",{status:!0,idDisplay:!0})},setAll:function(){this.form.withdraw_money=Math.floor(this.userInfo.user_wallet.money)},onClickLeft:function(){this.$router.push({name:"memberCenter"})},onClickRight:function(){this.$openKefu()},closeStatus:function(){this.accountShow=!1},showBank:function(){this.show=!0},onSelect:function(t){this.bankcard=t,this.show=!1},getLimitinfo:function(){var t=this;Object(r.kb)().then((function(e){t.limitInfo=e.data.data,t.form.withdraw_money&&t.getFee(t.form.withdraw_money)})),Object(r.V)().then((function(e){if(t.protocol=e.data.data,!t.form.protocol&&!t.form.dig_mode_type)return t.form.dig_mode_type=e.data.data[0].type,t.form.protocol=e.data.data[0].protocol[0].value,void t.handleTicker(e.data.data[0].protocol[0].value);t.handleTicker(t.form.protocol)}))},handleProtocol:function(t){this.form.protocol=t,this.handleTicker(t)},handleTicker:(m=Object(i.a)(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.C)({digital_mode_type:e});case 2:s=t.sent,this.ticker=s.data.data.upCoin;case 4:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)}),judgeCostMethod:function(){var t=this.siteInfo.cost_manage;return"1"===this.form.currency_type?!!t.bank_limit_open&&-1===t.level_limit.indexOf(this.userInfo.level)&&-1===t.white_list.split(",").indexOf(this.userInfo.username):-1===t.level_limit.indexOf(this.userInfo.level)&&-1===t.white_list.split(",").indexOf(this.userInfo.username)},handleChose:function(t){this.form.protocol=t.type,this.showDig=!1},hideKeyboard:function(){return this.showCapital=!0,this.form.pay_password?this.form.pay_password.length<6?(this.$toast.fail(this.$t("资金密码由6个数字组成")),!1):void 0:(this.$toast.fail(this.$t("资金密码不能为空")),!1)},checkNum:function(){/.*\..*/.test(this.form.withdraw_money)&&this.$toast.fail(this.$t("取款金额只能为正整数，不能带小数点"))},handleAddress:(h=Object(i.a)(regeneratorRuntime.mark((function t(){var e,s,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Object(n.a)((new Date).getTime(),"{h}:{i}"),s={type:this.form.dig_mode_type,protocol:this.form.protocol,address:this.form.address,remark:"".concat(this.form.protocol," ").concat(e)},!this.form.address){t.next=5;break}return t.next=5,Object(r.c)(s);case 5:return t.next=7,Object(r.u)();case 7:i=t.sent,this.form.user_dig_wallet_id=i.data.data[0].id;case 10:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})}},p=(s("f242"),s("0c7c")),_=Object(p.a)(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"withdraw-page"},[i("van-nav-bar",{staticClass:"m-header transparent",attrs:{title:t.title,"left-arrow":"",fixed:!0,"right-text":t.$t("专属客服")},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}}),i("div",{staticClass:"m-body gap"},[i("van-tabs",{directives:[{name:"show",rawName:"v-show",value:1===t.limitInfo.dig_withdraw_status,expression:"limitInfo.dig_withdraw_status === 1"}],attrs:{"line-width":".64rem","line-height":".08rem",color:"none","title-active-color":"white"},model:{value:t.form.currency_type,callback:function(e){t.$set(t.form,"currency_type",e)},expression:"form.currency_type"}},[i("van-tab",{attrs:{title:t.$t("银行卡"),name:"1"}}),i("van-tab",{attrs:{name:"2"}},[i("div",{staticClass:"tabsTitle",attrs:{slot:"title"},slot:"title"},[t._v("\n          "+t._s(t.$t("数字货币"))+"\n          "),i("span",[t._v(t._s(t.$t("安全 便捷")))])])])],1),i("ul",{staticClass:"withdraw-form"},[t.bankcard&&"1"===t.form.currency_type?i("li",{on:{click:t.showBank}},[i("div",{staticClass:"input"},[i("div",{staticClass:"input-head bank-icon"},[i("BankIcon",{attrs:{bankCode:t.bankcard.icon_code}})],1),i("div",{staticClass:"input-body"},[i("h3",[t._v(t._s(t.bankcard.bank_name))]),i("p",[t._v(t._s(t.$t("尾号"))+t._s(t.bankcard.card_no&&t.bankcard.card_no.slice(-4)))])]),i("div",{staticClass:"input-foot"},[i("span",[t._v(t._s(t.$t("切换")))]),i("van-icon",{attrs:{name:"arrow"}})],1)])]):t._e(),i("li",[i("label",[t._v(t._s(t.$t("取款金额")))]),i("div",{staticClass:"input"},[i("div",{staticClass:"input-head"},[t._v("¥")]),i("div",{staticClass:"input-body"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.withdraw_money,expression:"form.withdraw_money"}],attrs:{type:"text",placeholder:""+t.$t("最低取款金额"+t.siteInfo.cost_manage.money_range[0]+"元，最高取款金额"+t.siteInfo.cost_manage.money_range[1]+"元")},domProps:{value:t.form.withdraw_money},on:{blur:t.checkNum,input:function(e){e.target.composing||t.$set(t.form,"withdraw_money",e.target.value)}}})]),i("div",{staticClass:"input-foot"},[i("span",{staticClass:"withdrawAll",on:{click:t.setAll}},[t._v(t._s(t.$t("全部提现")))])])])]),"2"===t.form.currency_type?[i("li",{staticClass:"ticker-tips"},[i("p",[t._v(t._s(t.$t("预计到账"))),i("i",[t._v(t._s(t.fees.resFee&&t.ticker?(t.fees.resFee/t.ticker).toFixed(2):0))]),i("span",{staticStyle:{"text-transform":"uppercase"}},[t._v(t._s(t.form.dig_mode_type))]),t._v("（"+t._s(t.$t("实时汇率"))+"："+t._s(t.ticker)+"）")])]),i("li",{staticClass:"dig-wrap"},[i("label",[t._v(t._s(t.$t("提款币种")))]),i("div",{staticClass:"input",on:{click:function(e){t.showDig=!0}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.dig_mode_type,expression:"form.dig_mode_type"}],staticStyle:{"text-transform":"uppercase"},attrs:{disabled:"",type:"text"},domProps:{value:t.form.dig_mode_type},on:{input:function(e){e.target.composing||t.$set(t.form,"dig_mode_type",e.target.value)}}}),i("van-icon",{attrs:{name:"arrow-down"}})],1)]),i("li",{staticClass:"dig-wrap"},[i("label",[t._v(t._s(t.$t("协议")))]),t.protocol.length?i("div",{staticClass:"protocol"},t._l(t.protocol.filter((function(e){return e.type===t.form.dig_mode_type}))[0].protocol,(function(e,s){return i("span",{key:s,class:{active:t.form.protocol===e.value},on:{click:function(s){return t.handleProtocol(e.value)}}},[t._v(t._s(e.name))])})),0):t._e()]),i("li",{staticClass:"dig-wrap"},[i("label",[t._v(t._s(t.$t("收币地址")))]),i("div",{staticClass:"input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],attrs:{type:"text",placeholder:t.$t("输入或者长按粘贴地址")},domProps:{value:t.form.address},on:{blur:t.handleAddress,input:function(e){e.target.composing||t.$set(t.form,"address",e.target.value)}}}),i("span",[i("img",{attrs:{src:s("a771"),alt:""},on:{click:t.handleDig}})])])])]:t._e(),t.userInfo&&2!==t.userInfo.is_pay_password?i("li",[i("div",{staticClass:"input",on:{click:t.setFundPassword}},[i("div",{staticClass:"input-body"},[i("p",{staticClass:"red"},[t._v(t._s(t.$t("为保障您的资金安全")))])]),i("div",{staticClass:"input-foot"},[i("van-icon",{attrs:{name:"arrow"}})],1)])]):t._e(),i("li",{staticClass:"charge"},[i("label",{on:{click:t.showTips}},[t._v("\n          "+t._s(t.$t("费用管理"))+"\n          "),i("van-icon",{attrs:{name:"question-o"}})],1),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("手续费")))]),i("th",[t._v(t._s(t.$t("行政费")))]),i("th",[t._v(t._s(t.$t("扣除优惠")))]),i("th",[t._v(t._s(t.$t("最后可取")))])])]),i("tbody",[i("tr",[i("td",[t._v(t._s(t._f("currency")(t.fees.fee,"¥")))]),i("td",[t._v(t._s(t._f("currency")(t.fees.admin,"¥")))]),i("td",[t._v(t._s(t._f("currency")(t.fees.profit,"¥")))]),i("td",[t._v(t._s(t._f("currency")(t.fees.resFee<0?0:t.fees.resFee,"¥")))])])])])])],2),i("div",{staticClass:"aagames-tips"},[t._v(t._s(t.$t("温馨提示：取款流水验证有1-3分钟数据延迟，3-5分钟提款到账")))]),i("div",{staticClass:"ui-buttons"},[i("van-button",{attrs:{disabled:!t.allowSubmit,loading:t.submiting,type:"primary"},on:{click:t.submitBefore}},[t._v(t._s(t.$t("确认提交")))])],1)],1),i("van-popup",{staticClass:"custom",attrs:{closeable:"",round:"","close-icon-position":"top-left",position:"bottom","get-container":"#app"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticClass:"pop-head"},[i("h2",[t._v(t._s(t.$t("开户银行")))])]),i("div",{staticClass:"pop-body list-cells"},t._l(t.bankList,(function(e,s){return i("div",{key:s,staticClass:"cell",on:{click:function(s){return t.onSelect(e)}}},[i("div",{staticClass:"cell-head"},[i("BankIcon",{attrs:{bankCode:e.icon_code}})],1),i("div",{staticClass:"cell-body"},[t._v(t._s(e.bank_name))]),t.bankcard.id===e.id?i("div",{staticClass:"cell-foot"},[i("van-icon",{attrs:{name:"success"}})],1):t._e()])})),0)]),i("van-popup",{class:["custom",{topPass:t.showKeyboard}],attrs:{closeable:"",round:"","close-icon-position":"top-left",position:"bottom","get-container":"#app"},model:{value:t.showCapital,callback:function(e){t.showCapital=e},expression:"showCapital"}},[i("div",{staticClass:"pop-head"},[i("h2",[t._v(t._s(t.$t("输入资金密码")))])]),i("div",{staticClass:"pop-body list-cells"},[i("div",{staticClass:"input"},[i("div",{staticClass:"input-body"},[i("van-password-input",{attrs:{value:t.form.pay_password,length:6,gutter:15,focused:t.showKeyboard},on:{focus:function(e){t.showKeyboard=!0}}})],1),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.showKeyboard,expression:"!showKeyboard"}],staticClass:"forgetPass",on:{click:t.forgetFundPassword}},[t._v(t._s(t.$t("忘记资金密码")))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showKeyboard,expression:"!showKeyboard"}],staticClass:"footer-tips"},[i("p",[t._v("\n          "+t._s(t.$t("遇到问题，联系"))+"\n          "),i("span",{on:{click:t.$openKefu}},[t._v(t._s(t.$t("专属客服")))])])])])]),i("van-popup",{ref:"test",staticClass:"custom",attrs:{closeable:"",round:"","close-icon-position":"top-left",position:"bottom","get-container":"#app"},model:{value:t.submitInfo,callback:function(e){t.submitInfo=e},expression:"submitInfo"}},[i("div",{staticClass:"pop-head"},[i("h2",[t._v(t._s(t.$t("取款审核中")))])]),i("div",{staticClass:"pop-body"},[i("div",{staticClass:"pay-mark"},[i("div",{staticClass:"clock"},[i("van-image",{attrs:{src:s("c968")}}),i("van-count-down",{ref:"countDown2",staticClass:"processing-time-deposit",attrs:{time:t.time,format:"mm:ss"},on:{finish:function(e){return t.$refs.countDown2[0].reset()}}})],1),i("div",{staticClass:"money-text"},[t._v("¥"+t._s((1*t.form.withdraw_money||0).toFixed(2)))]),i("p",[t._v(t._s(t.$t("您的取款系统正在处理中")))]),i("p",[t._v(t._s(t.$t("请耐心等待")))])]),i("div",{staticClass:"btn"},[i("div",{staticClass:"aagames-button-box"},[i("button",{staticClass:"aagames-button mt30",attrs:{type:"button"},on:{click:function(e){t.submitInfo=!1}}},[t._v(t._s(t.$t("确定")))])]),i("div",{staticClass:"aagames-button-box"},[i("button",{staticClass:"aagames-button dark",attrs:{type:"button"},on:{click:function(e){return t.$router.push({name:"businessRecord",query:{type:1}})}}},[t._v(t._s(t.$t("查看交易记录")))])])])])]),i("van-popup",{staticClass:"custom",attrs:{closeable:"",round:"","close-icon-position":"top-left",position:"bottom","get-container":"#app"},model:{value:t.showDig,callback:function(e){t.showDig=e},expression:"showDig"}},[i("div",{staticClass:"pop-head"},[i("h2",[t._v(t._s(t.$t("提款币种类型")))])]),i("div",{staticClass:"pop-body"},t._l(t.protocol,(function(e,s){return i("p",{key:s,staticStyle:{"text-align":"center"},on:{click:function(s){return t.handleChose(e)}}},[t._v(t._s(e.type_name))])})),0)]),i("van-number-keyboard",{attrs:{"safe-area-inset-bottom":"",show:t.showKeyboard,"z-index":9999},on:{input:t.onInput,delete:t.onDelete,blur:function(e){t.showKeyboard=!1},hide:t.hideKeyboard}})],1)}),[],!1,null,"c24e607c",null);e.default=_.exports},f242:function(t,e,s){"use strict";s("0011")}}]);