(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-560c40d6"],{3917:function(t,e,a){"use strict";a("c972")},"9c26":function(t,e,a){"use strict";a.r(e),a("8e6e"),a("ac6a"),a("456d");var s=a("ade3"),n=(a("a481"),a("40ef")),i=a("c428"),o=a("5608"),c=a("d1c2"),r=a("2b0e"),l=a("2241");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(s.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}r.a.use(l.a);var u={name:"discountCore",components:{Loading:i.a,Lheader:n.a,ReportFilter:o.a},data:function(){return{title:this.$t("佣金报表"),isLoading:!1,filterShow:!1,showStartDate:!1,showEndDate:!1,currentDate:new Date,minDate:new Date(2017,0),maxDate:new Date,discountData:{start_text:this.gettime(),end_text:this.gettime(),page:1,access_token:window.localStorage.agToken,size:200,start_date:this.gettime(),end_date:this.gettime()},status:[],list:[]}},created:function(){var t=this;try{var e=document.getElementsByClassName("container")[0].offsetTop;window.scrollTo(0,e)}catch(t){}Object(c.i)({access_token:window.localStorage.agToken}).then((function(e){t.status=e.data.data})),this.commisionsheetList()},methods:{onFilter:function(){this.filterShow=!0},getcommissionFn:function(t){var e=this;t&&(t=t.replace(/年|月/g,"")),l.a.confirm({message:this.$t("是否领取佣金？")}).then((function(){Object(c.n)({month:t,access_token:window.localStorage.agToken}).then((function(t){0===t.data.code?e.$toast(e.$t("领取成功")):e.$toast(t.data.msg)}))})).catch((function(){}))},gettime:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();return a<10&&(a="0"+a),s<10&&(s="0"+s),e+"-"+a},commisionsheetList:function(){var t=this;this.isLoading=!0,this.discountData.start_date=this.discountData.start_date.slice(0,7),this.discountData.end_date=this.discountData.end_date.slice(0,7),this.discountData.start_date="".concat(this.discountData.start_date,"-01 00:00:00"),this.discountData.end_date="".concat(this.discountData.end_date,"-").concat(new Date(this.discountData.end_date.slice(0,4),this.discountData.end_date.slice(5),0).getDate()," 23:59:59"),Object(c.l)(this.discountData).then((function(e){t.list=e.data.data.list})).finally((function(){t.isLoading=!1}))},onConfirm:function(t){this.list=[],this.discountData=h(h({},this.discountData),t),this.commisionsheetList()},onConfirmStartDate:function(t){var e=t,a=e.getMonth()+1;a>=1&&a<=9&&(a="0"+a),this.discountData.start_date=e.getFullYear()+"-"+a,this.discountData.start_text=this.discountData.start_date,this.commisionsheetList(),this.showStartDate=!1},onConfirmEndDate:function(t){var e=t,a=e.getMonth()+1;a>=1&&a<=9&&(a="0"+a),this.discountData.end_date=e.getFullYear()+"-"+a,this.discountData.end_text=this.discountData.end_date,this.commisionsheetList(),this.showEndDate=!1},onCancelStartDate:function(t){this.showStartDate=!1},onCancelEndDate:function(t){this.showEndDate=!1}}},m=(a("3917"),a("0c7c")),f=Object(m.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container reportForm"},[a("lheader",{attrs:{title:t.title,goback:!0,"get-switch":!1,rightName:t.$t("筛选")},on:{rightClick:t.onFilter}}),a("div",{staticClass:"main"},["10037"===t.$projectname?a("div",{staticClass:"line-10037"}):t._e(),a("div",{staticClass:"list"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.list.length,expression:"list.length !== 0"}],staticClass:"table",attrs:{width:"100%"}},t._l(t.list,(function(e,s){return a("div",{key:s,staticClass:"item"},[a("div",{staticClass:"p p1"},[a("span",{staticClass:"left"},[t._v(t._s(t.$t("本月佣金")))]),a("span",{staticClass:"right"},[t._v(t._s(e.month_fee))])]),a("div",{staticClass:"p p2"},[a("span",{staticClass:"left"},[t._v("累计佣金："+t._s(e.history_fee)+" 　实际佣金："+t._s(e.fee))]),a("span",[1===e.status?a("button",{attrs:{type:"button"},on:{click:function(a){return t.getcommissionFn(e.month)}}},[t._v(t._s(t.$t("领取")))]):a("span",{class:{current:0==e.status}},[t._v(t._s(t.status[e.status]))])])]),a("div",{staticClass:"p p3"},[a("span",{staticClass:"left"},[t._v(t._s(e.month))]),a("span")])])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading&&0===t.list.length,expression:"!isLoading && list.length === 0"}],staticClass:"list_empty"},[a("div",{staticClass:"emptyDiv"},[a("div",{staticClass:"errorImg"}),a("div",{staticClass:"text"},[a("div",{staticClass:"chinese"},[t._v(t._s(t.$t("未找到相关数据")))])])])])]),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showStartDate,callback:function(e){t.showStartDate=e},expression:"showStartDate"}},[a("van-datetime-picker",{attrs:{"min-date":t.minDate,"max-date":t.maxDate,type:"year-month"},on:{confirm:t.onConfirmStartDate,cancel:t.onCancelStartDate},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showEndDate,callback:function(e){t.showEndDate=e},expression:"showEndDate"}},[a("van-datetime-picker",{attrs:{"min-date":t.minDate,"max-date":t.maxDate,type:"year-month"},on:{confirm:t.onConfirmEndDate,cancel:t.onCancelEndDate},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1),a("ReportFilter",{on:{onConfirm:t.onConfirm},model:{value:t.filterShow,callback:function(e){t.filterShow=e},expression:"filterShow"}}),a("loading",{attrs:{isShow:t.isLoading}})],1)}),[],!1,null,"2a143ba4",null);e.default=f.exports},c972:function(t,e,a){}}]);