(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-70a115c8"],{"159a":function(t,e,s){"use strict";s("d70a")},"52c3":function(t,e,s){"use strict";s.r(e);var a=s("40ef"),i=s("7555"),o=s("3b95"),n=s("a50d"),r=s("fe01"),c=s("2b0e"),l=s("d399");c.a.use(l.a);var d={name:"ForgetPassword",data:function(){return{login:"",title:this.$t("找回密码"),active:0,isAgree:!0,show:!1,retrieve:!0,step:1,username:"",userSafeinfo:{},vertifyWays:[],selectWay:{},questionList:null,question:"",answer:"",forgetpassList:{},errorShow:!1,code:"",getCode:"",password:"",repassword:"",canClick:!0,totalTime:60,loading:!1,clock:"",content:this.$t("获取验证码"),aoMenUi:["10009","10010","10011","10012","10015","10021","10034"]}},props:{value:{type:Boolean,default:!1}},components:{Lheader:a.a,SecurityStep:n.a},created:function(){var t=this;Object(r.p)().then((function(e){0===e.data.code&&(t.questionList=e.data.data)}))},watch:{step:function(t){var e=[this.$t("找回密码"),this.$t("验证身份"),this.$t("找回密码this."),this.$t("找回密码"),this.$t("找回密码"),this.$t("找回密码"),this.$t("找回密码"),this.$t("找回密码"),this.$t("找回密码"),this.$t("忘记密码")];this.title=e[t-1]}},methods:{close:function(){10===this.step?this.step=1:this.step>1?this.step=this.step-1:this.$emit("input",!1)},checkUserInfo:function(){var t=this;if(!this.username)return this.$toast.fail(this.$t("请输入账户名或手机号")),!1;Object(r.g)({merchant_no:"10031",username:this.username}).then((function(e){if(0===e.data.code){t.userSafeinfo=e.data.data;var s=t.userSafeinfo,a=s.mobile,i=s.email,o=s.pass_question_id;if(!a&&!i&&!o)return t.errorShow=!0,t.step=10,!1;if(t.vertifyWays=[],a&&t.vertifyWays.push({text:t.$t("手机号验证"),type:"mobile"}),i&&t.vertifyWays.push({text:t.$t("邮箱验证"),type:"email"}),o){t.vertifyWays.push({text:t.$t("密保验证"),type:"question"});for(var n=0;n<t.questionList.length;n++)if(t.questionList[n].id===o){t.question=t.questionList[n];break}}t.vertifyWays.length&&(t.selectWay=t.vertifyWays[0],t.step=2)}}))},forgetFn:function(){var t,e=this,s={merchant_no:"10031",uid:this.userSafeinfo.id},a=this.answer,i=this.code,o=this.question,n=this.selectWay.type;if("question"===n)a||this.$toast.fail(this.$t("请输入密保问题答案")),Object.assign(s,{pass_question_id:o.id,pass_answer:a}),t=Object(r.m)(s);else{if(!i)return this.$toast.fail(this.$t("请输入验证码")),!1;Object.assign(s,{code:i,phone_area_code:this.userSafeinfo.phone_area_code}),"mobile"===n?t=Object(r.h)(s):"email"===n&&(t=Object(r.j)(s))}t&&t.then((function(t){0===t.data.code?e.step=3:e.$toast.fail(t.data.msg)}))},onConfirm:function(t){this.selectWay=t,this.content=this.$t("获取验证码"),this.canClick=!0,window.clearInterval(this.clock),this.totalTime=60,this.show=!1},onCancel:function(t){this.show=!1},phoneCode:function(){var t=this;Object(r.l)({merchant_no:"10031",uid:this.userSafeinfo.id,phone_area_code:this.userSafeinfo.phone_area_code}).then((function(e){0==e.data.code?t.getCode=e.data.data.code:(t.$toast.fail(e.data.msg),window.clearInterval(t.clock),t.content=t.$t("重新发送验证码"),t.totalTime=60,t.canClick=!0)}))},emailCode:function(){var t=this;Object(r.i)({merchant_no:"10031",uid:this.userSafeinfo.id}).then((function(e){0==e.data.code?t.getCode=e.data.data.code:(t.$toast.fail(e.data.msg),window.clearInterval(t.clock),t.content=t.$t("重新发送验证码"),t.totalTime=60,t.canClick=!0)}))},countDown:function(){var t=this;this.canClick&&(this.canClick=!1,"mobile"===this.selectWay.type?this.phoneCode():this.emailCode(),this.content=this.totalTime+this.$t("秒后重新发送"),this.clock=window.setInterval((function(){t.totalTime--,t.content=t.totalTime+t.$t("秒后重新发送"),t.totalTime<0&&(window.clearInterval(t.clock),t.content=t.$t("重新发送验证码"),t.totalTime=60,t.canClick=!0)}),1e3))},submit:function(){var t=this;this.loading=!0;var e=this.password,s=this.repassword,a=this.answer,i=this.code,o=this.question,n={merchant_no:"10031",uid:this.userSafeinfo.id,phone_area_code:this.userSafeinfo.phone_area_code,type:1,password:e,repassword:s,code:i},c=this.selectWay.type;return o&&Object.assign(n,{pass_question_id:o.id,pass_answer:a}),e?s?e!==s?(this.$toast.fail(this.$t("两次输入的密码不一致")),!1):(n.type="mobile"===c?1:"email"===c?2:3,void Object(r.k)(n).then((function(e){0===e.data.code?(t.loading=!1,t.step=1,t.username="",t.code="",t.answer="",t.password="",t.repassword="",t.$toast(t.$t("登录密码修改成功")),t.$emit("hide")):t.$toast.fail(e.data.msg)}))):(this.$toast.fail(this.$t("请再次输入密码")),!1):(this.$toast.fail(this.$t("请输入密码")),!1)}}},u=(s("ce52"),s("0c7c")),p=Object(u.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container forgerPassword"},[a("lheader",{attrs:{title:t.title,isPopup:!0,kefu:!0,isLogin:t.login,steps:t.step,step:t.step},on:{goback:t.close}}),a("div",{staticClass:"main"},[t.step<10?a("SecurityStep",{attrs:{step:t.step,type:1}}):t._e(),1===t.step?a("div",[a("div",{staticClass:"aagames-form"},[a("div",{staticClass:"input username"},[a("img",{staticClass:"img",staticStyle:{"margin-right":"6px"},attrs:{src:s("3f11"),alt:""}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:""+t.$t("请输入您的")+t.$t(t.$config[t.$projectname].project)+t.$t("账号")},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})])]),a("div",{staticClass:"aagames-button-box step-one"},[a("van-button",{class:["aagames-button",{dark:!t.username}],attrs:{type:"button"},on:{click:t.checkUserInfo}},[t._v(t._s(t.$t("下一步")))])],1)]):t._e(),10===t.step?a("div",{staticClass:"no-binding"},[a("div",{staticClass:"msg"},[t._v(t._s(t.$t("由于您未绑定手机号")))]),a("div",{staticClass:"aagames-button-box"},[a("van-button",{staticClass:"aagames-button dark",attrs:{type:"button"},on:{click:function(e){t.step=1}}},[t._v(t._s(t.$t("绑定资料")))]),a("div",{staticClass:"px30"}),a("van-button",{staticClass:"aagames-button dark",attrs:{type:"button"},on:{click:t.$openKefu}},[t._v(t._s(t.$t("在线客服解决")))])],1)]):2===t.step?a("div",{staticClass:"retrievePassword"},[t.selectWay?[a("div",{staticClass:"aagames-form verification"},[a("p",[a("span",[t._v(t._s(t.$t("验证方式")))])]),a("div",{staticClass:"input",on:{click:function(e){t.show=!0}}},[a("img",{staticClass:"xiala",staticStyle:{"margin-right":"6px"},attrs:{src:s("349d"),alt:""}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectWay.text,expression:"selectWay.text"}],attrs:{type:"text",disabled:"",placeholder:t.$t("请选择验证方式")},domProps:{value:t.selectWay.text},on:{input:function(e){e.target.composing||t.$set(t.selectWay,"text",e.target.value)}}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"mobile"===t.selectWay.type,expression:"selectWay.type === 'mobile'"}],staticClass:"aagames-form verification"},[a("p",[a("span",[t._v(t._s(t.$t("已绑定手机")))]),t._v("\n            "+t._s(t.userSafeinfo.mobile)+"\n          ")]),a("div",{staticClass:"code"},[a("div",{staticClass:"input"},[a("img",{staticClass:"img",staticStyle:{"margin-right":"6px"},attrs:{src:s("2766"),alt:""}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"text",placeholder:t.$t("请输入验证码")},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),a("div",{staticClass:"send",style:{width:t.content.length>5?"5rem":""},on:{click:t.countDown}},[t._v(t._s(t.content))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"email"===t.selectWay.type,expression:"selectWay.type === 'email'"}],staticClass:"aagames-form verification"},[a("p",[a("span",[t._v(t._s(t.$t("已绑定邮箱")))]),t._v("\n            "+t._s(t.userSafeinfo.email)+"\n          ")]),a("div",{staticClass:"code"},[a("div",{staticClass:"input"},[a("img",{staticClass:"img",staticStyle:{"margin-right":"6px"},attrs:{src:s("2766"),alt:""}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"text",placeholder:t.$t("请输入验证码")},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),a("div",{staticClass:"send",on:{click:t.countDown}},[t._v(t._s(t.content))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"question"===t.selectWay.type,expression:"selectWay.type === 'question'"}],staticClass:"aagames-form verification"},[a("p",[a("span",[t._v(t._s(t.$t("密保问题")))]),t._v("\n            "+t._s(t.question.name)+"\n          ")]),a("div",{staticClass:"code"},[a("div",{staticClass:"input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"answer"}],attrs:{type:"text",placeholder:t.$t("请输入答案")},domProps:{value:t.answer},on:{input:function(e){e.target.composing||(t.answer=e.target.value)}}})])])]),a("div",{staticClass:"aagames-button-box"},[a("van-button",{class:["aagames-button",{dark:!t.code&&!t.answer}],attrs:{type:"button",disabled:!t.code&&!t.answer},on:{click:t.forgetFn}},[t._v(t._s(t.$t("下一步")))])],1)]:t._e()],2):3===t.step?a("div",{staticClass:"reset"},[a("div",{staticClass:"newPass aagames-form"},[a("p",[t._v(t._s(t.$t("请输入新登录密码")))]),a("div",{staticClass:"input"},[a("img",{staticClass:"img",staticStyle:{"margin-right":"6px"},attrs:{src:s("2472"),alt:""}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:t.$t("8-12位字符，由数字、字母、符号组成")},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),a("div",{staticClass:"confirmPass aagames-form"},[a("p",[t._v(t._s(t.$t("确认新密码")))]),a("div",{staticClass:"input"},[a("img",{staticClass:"img",staticStyle:{"margin-right":"6px"},attrs:{src:s("2472"),alt:""}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.repassword,expression:"repassword"}],attrs:{type:"password",placeholder:t.$t("请再次输入密码")},domProps:{value:t.repassword},on:{input:function(e){e.target.composing||(t.repassword=e.target.value)}}})])]),a("div",{staticClass:"aagames-button-box"},[a("van-button",{class:["aagames-button",{dark:!t.password||!t.repassword}],attrs:{type:"button",disabled:!t.password&&!t.repassword},on:{loading:t.loading,click:t.submit}},[t._v(t._s(t.$t("完成")))])],1)]):t._e(),a("van-popup",{attrs:{"get-container":"#app",position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.vertifyWays},on:{confirm:t.onConfirm,cancel:t.onCancel}})],1)],1)],1)}),[],!1,null,"c066dd12",null).exports,h=s("ed08"),m=s("1b62");c.a.use(l.a);var v={mixins:[m.a],name:"login",data:function(){return{login:this.$t("注册"),title:this.$t("账号登录"),tab:[this.$t("账号登录")," 手机登录"],active:0,account:{password:"",username:""},phoneSign:{phone:"",code:""},getCode:"",areaCode:86,show:!1,ForgetPasswordShow:!1,columns:[],loading:!1,isRember:!1}},components:{Lheader:a.a,Gcode:o.a,ForgetPassword:p},created:function(){},methods:{tabChange:function(t){this.active=t},signIn:function(){var t=this;if(0===this.active){if(!this.account.username)return this.$toast.fail(this.$t("请输入游戏账号")),!1;if(!this.account.password)return this.$toast.fail(this.$t("请输入密码")),!1;this.loading=!0,Object(i.d)({merchant_no:"10031",username:this.account.username,password:this.account.password,phone_area_code:"+"+this.areaCode}).then((function(e){if(t.loading=!1,0===e.data.code){t.$store.dispatch("users/updateToken",e.data.data.access_token),t.$store.dispatch("users/getUserInfo");var s=t;Object(l.a)({message:t.$t("登录成功！"),onClose:function(){"true"==window.localStorage.getItem("isAuth")?s.$router.push("ytAuth"):s.$router.push("/")}})}else t.$toast.fail(e.data.msg)}),(function(e){t.loading=!1}))}else{if(!Object(h.h)(this.phoneSign.phone))return this.$toast.fail(this.$t("手机格式有误")),!1;if(!this.phoneSign.code)return this.$toast.fail(this.$t("验证码输入有误")),!1;this.loading=!0,Object(i.e)({merchant_no:"10031",mobile:this.phoneSign.phone,code:this.phoneSign.code,phone_area_code:"+"+this.areaCode}).then((function(e){if(t.loading=!1,0===e.data.code){t.$store.dispatch("users/updateToken",e.data.data.access_token),t.$store.dispatch("users/getUserInfo");var s=t;Object(l.a)({message:t.$t("登录成功！"),onClose:function(){"true"==window.localStorage.getItem("isAuth")?s.$router.push("/ytAuth"):s.$router.push("/")}})}else t.$toast.fail(e.data.msg)}),(function(e){t.loading=!1}))}},getCodeC:function(t){this.getCode=t},myCodeC:function(t){this.phoneSign.code=t},quick:function(){this.$router.push({path:"/register"})}}},g=(s("159a"),Object(u.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container login"},[a("div",{staticClass:"main",attrs:{id:"home"}},[a("div",{staticClass:"home"},[a("div",{staticClass:"top-bar"},[t._v('/"})" />\n          '),a("a",{attrs:{href:"javascript:;"},on:{click:t.quick}},[t._v(t._s(t.$t("注册")))])]),a("van-tabs",{staticClass:"login-tabs",attrs:{"line-width":".64rem","line-height":".08rem",color:t.$colorjs.baseColor},on:{click:t.tabChange}},t._l(t.tab,(function(t){return a("van-tab",{key:t,staticClass:"tab-list",attrs:{title:t}})})),1),a("div",{staticClass:"fill"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}]},[a("div",{staticClass:"aagames-form"},[a("div",{staticClass:"input"},[a("img",{staticClass:"img",attrs:{src:t.$imgs["login/user@2x"],alt:""}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account.username,expression:"account.username"}],attrs:{type:"text",placeholder:t.$t("游戏账号")},domProps:{value:t.account.username},on:{input:function(e){e.target.composing||t.$set(t.account,"username",e.target.value)}}})])]),a("div",{staticClass:"aagames-form"},[a("div",{staticClass:"input"},[a("img",{staticClass:"img",attrs:{src:t.$imgs["login/pass@2x"],alt:""}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account.password,expression:"account.password"}],attrs:{type:"password",placeholder:t.$t("请输入密码")},domProps:{value:t.account.password},on:{input:function(e){e.target.composing||t.$set(t.account,"password",e.target.value)}}})])]),a("div",{staticClass:"aagames-button-box funDiv"},[a("div",{staticClass:"left",on:{click:function(e){t.ForgetPasswordShow=!0}}},[t._v(t._s(t.$t("忘记密码")))]),a("div",{staticClass:"right"},[a("van-switch",{model:{value:t.isRember,callback:function(e){t.isRember=e},expression:"isRember"}}),a("span",[t._v(t._s(t.$t("记住用户名")))])],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}]},[a("div",{staticClass:"aagames-form"},[a("div",{staticClass:"input"},[a("img",{staticClass:"img phone",attrs:{src:t.$imgs["login/mobile@2x"],alt:""}}),a("phoneArea",{model:{value:t.areaCode,callback:function(e){t.areaCode=e},expression:"areaCode"}},[a("i",{staticClass:"areaNum"},[t._v("\n                     +"+t._s(t.areaCode)+"\n                    "),a("img",{staticClass:"xiala",attrs:{src:s("349d"),alt:""}})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneSign.phone,expression:"phoneSign.phone"}],attrs:{type:"text",placeholder:t.$t("请输入手机号")},domProps:{value:t.phoneSign.phone},on:{input:function(e){e.target.composing||t.$set(t.phoneSign,"phone",e.target.value)}}})],1)]),a("gcode",{attrs:{account:t.phoneSign.phone,withLabel:!1,withIcon:!0,areaCode:t.areaCode},on:{getCode:t.getCodeC,myCode:t.myCodeC}})],1)]),a("div",{staticClass:"function"},[a("div",{staticClass:"aagames-button-box"},[a("van-button",{staticClass:"aagames-button sign-in",attrs:{loading:t.loading,"loading-text":t.$t("登录中..."),type:"button"},on:{click:t.signIn}},[t._v("登录\n            ")])],1)]),a("van-image",{staticStyle:{width:"100%"},attrs:{src:t.$imgs["login/login-bg@2x"]}}),a("div",{staticClass:"customer"},[a("div",{staticClass:"wait",on:{click:function(e){return t.go("/")}}},[a("img",{attrs:{src:s("0503"),alt:""}}),t._v("\n"+t._s(t.$t("再逛逛吧"))+"\n          ")]),a("div",{staticClass:"cut-up"}),a("div",{staticClass:"kefu",on:{click:t.$openKefu}},[a("img",{attrs:{src:s("2803"),alt:""}}),t._v("\n"+t._s(t.$t("专属客服"))+"\n          ")])])],1)]),a("van-popup",{attrs:{"get-container":"#app",position:"bottom"},model:{value:t.ForgetPasswordShow,callback:function(e){t.ForgetPasswordShow=e},expression:"ForgetPasswordShow"}},[a("ForgetPassword",{on:{hide:function(e){t.ForgetPasswordShow=!1}},model:{value:t.ForgetPasswordShow,callback:function(e){t.ForgetPasswordShow=e},expression:"ForgetPasswordShow"}})],1)],1)}),[],!1,null,"4c148444",null));e.default=g.exports},ce52:function(t,e,s){"use strict";s("fb4b")},d70a:function(t,e,s){},fb4b:function(t,e,s){}}]);